<!DOCTYPE html>
<html lang="en"><head>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-html/tabby.min.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.3.361">

  <meta name="author" content="Meike Niederhausen, PhD &amp; Jessica Minnier, PhD">
  <meta name="dcterms.date" content="2026-01-22">
  <title>3: Data Visualization and Data Manipulation</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../site_libs/revealjs/dist/theme/quarto.css">
  <link href="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">3: Data Visualization and Data Manipulation</h1>
  <p class="subtitle">BSTA 526: R Programming for Health Data Science</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Meike Niederhausen, PhD &amp; Jessica Minnier, PhD 
</div>
        <p class="quarto-title-affiliation">
            OHSU-PSU School of Public Health
          </p>
    </div>
</div>

  <p class="date">2026-01-22</p>
</section>
<section>
<section id="welcome-to-r-programming-part-3" class="title-slide slide level1 center" data-number="1">
<h1><span class="header-section-number">1</span> Welcome to R Programming: Part 3!</h1>
<p>In this session, we will cover the basics of data wrangling with <code>dplyr</code> functions and some options for customizing ggplots.</p>
<p><br></p>
<p>Before you get started:</p>
<blockquote>
<p>Remember to save this notebook under a new name, such as <code>part_03_b526_YOURNAME.qmd</code>.</p>
</blockquote>
</section>
<section id="learning-objectives" class="slide level2" data-number="1.1">
<h2><span class="header-section-number">1.1</span> Learning Objectives</h2>
<p>By the end of this session, you should be able to:</p>
<ol type="1">
<li><strong>Learn</strong> about errors and warnings and where to ask for help</li>
<li>Become more confident with file management and uploading data</li>
<li>Sort by a variable in a dataset using <code>arrange()</code></li>
<li>Select variables in a dataset using <code>select()</code></li>
<li>Filter a dataset using the <code>filter()</code> function</li>
<li>Create and modify scatterplots and boxplots</li>
<li>Split figures into multiple panels using <code>facet_wrap()</code></li>
<li>Customize your plots using built in <code>theme()</code>s</li>
</ol>
</section></section>
<section>
<section id="getting-help-on-errors" class="title-slide slide level1 center" data-number="2">
<h1><span class="header-section-number">2</span> Getting Help on Errors</h1>

</section>
<section id="understanding-the-difference-between-warnings-and-errors" class="slide level2" data-number="2.1">
<h2><span class="header-section-number">2.1</span> Understanding the difference between warnings and errors</h2>
<ul>
<li>A <em>warning</em> is an indication that the data or arguments isn’t quite what the function expected.
<ul>
<li>You can usually run the code, but you should be careful about it and verify the output.</li>
</ul></li>
</ul>
<p><br></p>
<ul>
<li>An <em>error</em> means that the code can’t run at all given what you have given the function.
<ul>
<li>Errors can be difficult to understand, which is why…</li>
</ul></li>
</ul>
</section>
<section id="googling-is-standard-practice-for-errors" class="slide level2" data-number="2.2">
<h2><span class="header-section-number">2.2</span> Googling is StandaRd pRactice foR eRRors</h2>
<p>The first thing I do when I encounter an error that I don’t understand is to search the internet for the error.</p>
<p>There are some resources that I especially check (in order):</p>
<ul>
<li>Search “question + rcran” (i.e “hist rcran” or “make a boxplot ggplot”)</li>
<li>Search error in quotes (i.e.&nbsp;“Evaluation error: invalid type (closure) for variable ’***’“)</li>
<li>AI: such as <a href="https://claude.ai/">Claude</a>, <a href="https://www.perplexity.ai/">Perplexity</a>, <a href="https://openai.com/index/chatgpt/">chatgpt</a>, etc.</li>
<li>More advanced/specific searches
<ul>
<li>Posit/Rstudio Community (for <code>tidyverse</code>): <a href="https://forum.posit.co/" class="uri">https://forum.posit.co/</a></li>
<li><a href="https://stackoverflow.com/questions/tagged/r">Stack Overflow #r tag</a></li>
<li>Biostars (for Bioinformatics): <a href="https://www.biostars.org/" class="uri">https://www.biostars.org/</a></li>
<li>The package’s github page (especially issues)</li>
<li>Advanced search <a href="https://github.com/search/advanced?q=language:R">github</a> for your function name to see examples or search the error</li>
</ul></li>
</ul>
</section>
<section id="how-to-find-examples-and-information-on-function-arguments" class="slide level2" data-number="2.3">
<h2><span class="header-section-number">2.3</span> How to find examples and information on function arguments</h2>
<ul>
<li>Read the vignettes! (or user guide if there is one)</li>
<li>Read the help documentation (sometimes not that useful)</li>
<li>Look at cheatsheets: <a href="https://posit.co/resources/cheatsheets/" class="uri">https://posit.co/resources/cheatsheets/</a></li>
<li>Search the internet as above, or use AI.</li>
</ul>
</section></section>
<section>
<section id="revisiting-data-loading-and-file-management" class="title-slide slide level1 center" data-number="3">
<h1><span class="header-section-number">3</span> Revisiting data loading and file management</h1>
<p>Useful resources from last time:</p>
<ul>
<li><code>readxl</code> intro vignette: <a href="https://readxl.tidyverse.org/" class="uri">https://readxl.tidyverse.org/</a></li>
<li><a href="https://github.com/rstudio/cheatsheets/blob/main/data-import.pdf">Data import cheatsheet</a>.</li>
</ul>
</section>
<section id="challenge-1-10-minutes" class="slide level2" data-number="3.1">
<h2><span class="header-section-number">3.1</span> Challenge 1 (10 minutes)</h2>
<ol type="1">
<li>Create a new .qmd file and name it <code>smoke_messy.qmd</code>. Save it in the “part3” folder.</li>
<li>Load data from the file <code>data/smoke_complete.xlsx</code> from the second tab/sheet “smoke_messy” using the <code>read_excel()</code> function and the appropriate arguments. Remember to look at the data first! Remember to load your packages! Name the data <code>smoke_messy</code>.</li>
<li>Use <code>glimpse</code> and <code>View</code> to view your data and observe the column names and column types, making sure numeric columns are numeric (class <code>dbl</code>).</li>
</ol>
<p><em>Discussion questions</em></p>
<ul>
<li>What tenets of the paper “<a href="https://www.tandfonline.com/doi/full/10.1080/00031305.2017.1375989">Data Organization in Spreadsheets</a>” are broken here?</li>
<li>What has been the hardest part about loading data in R for you?</li>
</ul>
</section></section>
<section>
<section id="data-manipulation-using-dplyr" class="title-slide slide level1 center" data-number="4">
<h1><span class="header-section-number">4</span> Data Manipulation using <code>dplyr</code></h1>
<ul>
<li>We’re going to start off our data work with some data manipulation using the tidyverse package: <code>dplyr</code>.</li>
<li><code>dplyr</code> is your all-purpose toolbox for filtering, summarizing, and transforming data.</li>
</ul>
</section>
<section id="common-dplyr-verbs" class="slide level2" data-number="4.1">
<h2><span class="header-section-number">4.1</span> Common <code>dplyr</code> “verbs”</h2>
<p><code>dplyr</code> uses common verbs to wrangle data</p>
<p>Examples:</p>
<ul>
<li><code>arrange()</code> - sorts a dataset by a variable</li>
<li><code>filter()</code> - subsets a dataset by criteria</li>
<li><code>select()</code> - returns only a few columns from a dataset</li>
<li><code>group_by()/summarize()</code> - summarizes a dataset, such as counting frequencies and calculating means</li>
<li><code>mutate()</code> - transforms variables in a dataset</li>
</ul>
<p><br></p>
<ul>
<li><code>%&gt;%</code> - the pipe function lets us join “verbs” together in a <em>sequence of operations that transform a dataset</em>.</li>
</ul>
</section>
<section id="getting-set-up-load-the-smoke_complete-dataset" class="slide level2" data-number="4.2">
<h2><span class="header-section-number">4.2</span> Getting set up: load the <code>smoke_complete</code> dataset</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="co"># load the first tab smoke_complete</span></span>
<span id="cb1-2"><a href="#cb1-2"></a>smoke_complete <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(</span>
<span id="cb1-3"><a href="#cb1-3"></a>  <span class="fu">here</span>(<span class="st">"part3"</span>, <span class="st">"data"</span>, <span class="st">"smoke_complete.xlsx"</span>),</span>
<span id="cb1-4"><a href="#cb1-4"></a>  <span class="at">sheet =</span> <span class="dv">1</span>, </span>
<span id="cb1-5"><a href="#cb1-5"></a>  <span class="at">na =</span> <span class="st">"NA"</span></span>
<span id="cb1-6"><a href="#cb1-6"></a>  )</span>
<span id="cb1-7"><a href="#cb1-7"></a></span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="co"># Remove some columns for easier viewing - we'll talk about the select function later</span></span>
<span id="cb1-9"><a href="#cb1-9"></a></span>
<span id="cb1-10"><a href="#cb1-10"></a>smoke_complete <span class="ot">&lt;-</span> smoke_complete <span class="sc">%&gt;%</span> </span>
<span id="cb1-11"><a href="#cb1-11"></a>  <span class="fu">select</span>(age_at_diagnosis, </span>
<span id="cb1-12"><a href="#cb1-12"></a>         tumor_stage,</span>
<span id="cb1-13"><a href="#cb1-13"></a>         cigarettes_per_day, </span>
<span id="cb1-14"><a href="#cb1-14"></a>         gender, </span>
<span id="cb1-15"><a href="#cb1-15"></a>         vital_status, </span>
<span id="cb1-16"><a href="#cb1-16"></a>         disease)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section></section>
<section>
<section id="introducing-the-pipe-or" class="title-slide slide level1 center" data-number="5">
<h1><span class="header-section-number">5</span> Introducing the pipe (<code>%&gt;%</code> or <code>|&gt;</code>)</h1>

</section>
<section id="connect-multiple-operations-with" class="slide level2" data-number="5.1">
<h2><span class="header-section-number">5.1</span> Connect multiple operations with <code>%&gt;%</code></h2>
<ul>
<li>Often we want to do multiple operations on our data and in a specific order.</li>
<li>For example, I might want to do the following:
<ul>
<li><em>Take</em> my dataset <code>smoke_complete</code> <strong>and then</strong></li>
<li><em>Sort</em> it by <code>cigarettes_per_day</code> <strong>and then</strong></li>
<li><em>filter</em> to have only <code>males</code> from the data.</li>
</ul></li>
</ul>
<p>The pipe (<code>%&gt;%</code>) function acts like the <strong>“and then”</strong>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="co"># Take my dataset smoke complete **and then**</span></span>
<span id="cb2-2"><a href="#cb2-2"></a>smoke_complete <span class="sc">%&gt;%</span></span>
<span id="cb2-3"><a href="#cb2-3"></a>  </span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="co"># sort it by cigarettes_per day **and then**</span></span>
<span id="cb2-5"><a href="#cb2-5"></a>  <span class="fu">arrange</span>(cigarettes_per_day) <span class="sc">%&gt;%</span></span>
<span id="cb2-6"><a href="#cb2-6"></a></span>
<span id="cb2-7"><a href="#cb2-7"></a><span class="co"># filter it to only have males</span></span>
<span id="cb2-8"><a href="#cb2-8"></a>  <span class="fu">filter</span>(gender <span class="sc">==</span> <span class="st">"male"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 786 × 6
   age_at_diagnosis tumor_stage cigarettes_per_day gender vital_status disease
              &lt;dbl&gt; &lt;chr&gt;                    &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;        &lt;chr&gt;  
 1            18051 stage iii              0.00822 male   dead         BLCA   
 2            29288 stage iii              0.0548  male   dead         BLCA   
 3            18983 stage ii               0.0822  male   dead         BLCA   
 4            22632 stage iiia             0.110   male   dead         LUSC   
 5            22632 stage iiia             0.110   male   dead         LUSC   
 6            20632 stage iib              0.110   male   alive        LUSC   
 7            20632 stage iib              0.110   male   alive        LUSC   
 8            25579 stage iii              0.110   male   dead         BLCA   
 9            23156 stage i                0.137   male   dead         LUSC   
10            23156 stage i                0.137   male   dead         LUSC   
# ℹ 776 more rows</code></pre>
</div>
</div>
</section>
<section id="output-of-one-step-is-the-input-of-another" class="slide level2" data-number="5.2">
<h2><span class="header-section-number">5.2</span> <code>%&gt;%</code>: output of one step is the input of another</h2>
<ul>
<li>You can think of a pipe as putting the output of one step as an input of another.</li>
<li>These two statements are equivalent:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>smoke_complete <span class="sc">%&gt;%</span></span>
<span id="cb4-2"><a href="#cb4-2"></a>  <span class="fu">arrange</span>(cigarettes_per_day)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,152 × 6
   age_at_diagnosis tumor_stage  cigarettes_per_day gender vital_status disease
              &lt;dbl&gt; &lt;chr&gt;                     &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;        &lt;chr&gt;  
 1            18051 stage iii               0.00822 male   dead         BLCA   
 2            19847 not reported            0.0110  female alive        CESC   
 3            14225 not reported            0.0219  female dead         CESC   
 4            31258 not reported            0.0312  female alive        CESC   
 5            27449 stage ii                0.0548  female dead         LUSC   
 6            27449 stage ii                0.0548  female dead         LUSC   
 7            16429 stage iii               0.0548  female dead         LUSC   
 8            16429 stage iii               0.0548  female dead         LUSC   
 9            15965 not reported            0.0548  female alive        CESC   
10            17465 not reported            0.0548  female dead         CESC   
# ℹ 1,142 more rows</code></pre>
</div>
</div>
<p>and</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="fu">arrange</span>(smoke_complete, cigarettes_per_day)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,152 × 6
   age_at_diagnosis tumor_stage  cigarettes_per_day gender vital_status disease
              &lt;dbl&gt; &lt;chr&gt;                     &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;        &lt;chr&gt;  
 1            18051 stage iii               0.00822 male   dead         BLCA   
 2            19847 not reported            0.0110  female alive        CESC   
 3            14225 not reported            0.0219  female dead         CESC   
 4            31258 not reported            0.0312  female alive        CESC   
 5            27449 stage ii                0.0548  female dead         LUSC   
 6            27449 stage ii                0.0548  female dead         LUSC   
 7            16429 stage iii               0.0548  female dead         LUSC   
 8            16429 stage iii               0.0548  female dead         LUSC   
 9            15965 not reported            0.0548  female alive        CESC   
10            17465 not reported            0.0548  female dead         CESC   
# ℹ 1,142 more rows</code></pre>
</div>
</div>
</section>
<section id="why-pipes" class="slide level2" data-number="5.3">
<h2><span class="header-section-number">5.3</span> Why pipes?</h2>
<ul>
<li>Pipes make it easier to put together commands.</li>
<li>Without pipes, I’d have to do the following:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="fu">arrange</span>(</span>
<span id="cb8-2"><a href="#cb8-2"></a>  <span class="fu">filter</span>(smoke_complete, </span>
<span id="cb8-3"><a href="#cb8-3"></a>         gender <span class="sc">==</span> <span class="st">"male"</span>),</span>
<span id="cb8-4"><a href="#cb8-4"></a>  cigarettes_per_day</span>
<span id="cb8-5"><a href="#cb8-5"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 786 × 6
   age_at_diagnosis tumor_stage cigarettes_per_day gender vital_status disease
              &lt;dbl&gt; &lt;chr&gt;                    &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;        &lt;chr&gt;  
 1            18051 stage iii              0.00822 male   dead         BLCA   
 2            29288 stage iii              0.0548  male   dead         BLCA   
 3            18983 stage ii               0.0822  male   dead         BLCA   
 4            22632 stage iiia             0.110   male   dead         LUSC   
 5            22632 stage iiia             0.110   male   dead         LUSC   
 6            20632 stage iib              0.110   male   alive        LUSC   
 7            20632 stage iib              0.110   male   alive        LUSC   
 8            25579 stage iii              0.110   male   dead         BLCA   
 9            23156 stage i                0.137   male   dead         LUSC   
10            23156 stage i                0.137   male   dead         LUSC   
# ℹ 776 more rows</code></pre>
</div>
</div>
<ul>
<li>You can see that as you add more and more verbs, it gets more and more complicated.</li>
<li>We end up with very very nested parentheses. Or, many steps like this:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a>smoke_complete_new <span class="ot">&lt;-</span> <span class="fu">filter</span>(smoke_complete, gender<span class="sc">==</span><span class="st">"male"</span>)</span>
<span id="cb10-2"><a href="#cb10-2"></a>smoke_complete_new <span class="ot">&lt;-</span> <span class="fu">arrange</span>(smoke_complete_new, cigarettes_per_day)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>That’s what pipes are supposed to save us from.</p>
</section>
<section id="one-step-at-a-time" class="slide level2" data-number="5.4">
<h2><span class="header-section-number">5.4</span> One Step at a Time</h2>
<ul>
<li>One big advantage of the pipe is that you can build your processing line by line.</li>
<li>In practice, as I work, I will often pipe things into <code>View()</code> to confirm I did things correctly:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>smoke_complete <span class="sc">%&gt;%</span></span>
<span id="cb11-2"><a href="#cb11-2"></a>  <span class="fu">arrange</span>(cigarettes_per_day) <span class="sc">%&gt;%</span></span>
<span id="cb11-3"><a href="#cb11-3"></a>  <span class="fu">View</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>This is a good way to work. By building each step and verifying that the output is correct, we can build really long <em>sequence</em> of processing.</li>
<li>Even better is to include checks in your code to verify that your work is correct.</li>
</ul>
<p><strong>IMPORTANT POINT:</strong></p>
<ul>
<li>The code above has not saved our work.</li>
<li>The data frame object has not changed, the excel file has not changed.</li>
<li>To save your data frame after wrangling/cleaning/arranging it, save it as the same or another object:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a><span class="co"># replaces previous version with new sorted version</span></span>
<span id="cb12-2"><a href="#cb12-2"></a>smoke_complete <span class="ot">&lt;-</span> smoke_complete <span class="sc">%&gt;%</span></span>
<span id="cb12-3"><a href="#cb12-3"></a>  <span class="fu">arrange</span>(cigarettes_per_day)</span>
<span id="cb12-4"><a href="#cb12-4"></a></span>
<span id="cb12-5"><a href="#cb12-5"></a><span class="co"># creates a new object</span></span>
<span id="cb12-6"><a href="#cb12-6"></a>smoke_complete_sorted <span class="ot">&lt;-</span> smoke_complete <span class="sc">%&gt;%</span></span>
<span id="cb12-7"><a href="#cb12-7"></a>  <span class="fu">arrange</span>(cigarettes_per_day)</span>
<span id="cb12-8"><a href="#cb12-8"></a></span>
<span id="cb12-9"><a href="#cb12-9"></a><span class="co"># look at your Environment tab</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="the-difference-between-and" class="slide level2" data-number="5.5">
<h2><span class="header-section-number">5.5</span> The difference between <code>+</code> and <code>%&gt;%</code></h2>
<ul>
<li>Remember
<ul>
<li>that <code>+</code> is for <code>ggplot2</code> and</li>
<li>that <code>%&gt;%</code> is for <code>dplyr</code>.</li>
</ul></li>
<li>To keep them distinct and avoid confusion, I recommend keeping data processing and plotting steps separate.</li>
<li>You can chain them, but it can get confusing</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="co"># keeping data processing and plotting steps separate</span></span>
<span id="cb13-2"><a href="#cb13-2"></a>smoke_complete_sorted <span class="ot">&lt;-</span> smoke_complete <span class="sc">%&gt;%</span></span>
<span id="cb13-3"><a href="#cb13-3"></a>  <span class="fu">arrange</span>(cigarettes_per_day)</span>
<span id="cb13-4"><a href="#cb13-4"></a></span>
<span id="cb13-5"><a href="#cb13-5"></a><span class="fu">ggplot</span>(<span class="at">data =</span> smoke_complete_sorted) <span class="sc">+</span></span>
<span id="cb13-6"><a href="#cb13-6"></a>  <span class="fu">aes</span>(<span class="at">x =</span> cigarettes_per_day) <span class="sc">+</span></span>
<span id="cb13-7"><a href="#cb13-7"></a>  <span class="fu">geom_histogram</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img data-src="part_03_b526_slides_files/figure-revealjs/unnamed-chunk-10-1.png" width="672"></p>
</div>
</div>
</section>
<section id="base-r-pipe" class="slide level2" data-number="5.6">
<h2><span class="header-section-number">5.6</span> Base R pipe <code>|&gt;</code></h2>
<ul>
<li>R version 4.1.0 introduced the “native” pipe operator <code>|&gt;</code>
<ul>
<li>that comes as part of the R syntax without the need for loading additional packages (i.e.&nbsp;the tidyverse).</li>
</ul></li>
<li>Learn more about this at the <a href="https://www.tidyverse.org/blog/2023/04/base-vs-magrittr-pipe/" target="_blank">Tidyverse website</a> and the <a href="https://r4ds.hadley.nz/data-transform.html#the-pipe" target="_blank">pipe section of R for Data Science</a>.</li>
</ul>
<p>You really just need to know that</p>
<blockquote>
<p>The behaviour of the native pipe is by and large the same as that of the %&gt;% pipe provided by the magrittr package. Both operators (|&gt; and %&gt;%) let you “pipe” an object forward to a function or call expression, thereby allowing you to express a sequence of operations that transform an object…there’s no need to commit entirely to one pipe or the other — you can use the base pipe for the majority of cases where it’s sufficient and use the magrittr pipe when you really need its special features - From the <a href="https://www.tidyverse.org/blog/2023/04/base-vs-magrittr-pipe/">Tidyverse website</a></p>
</blockquote>
<p>It’s fine to use either one. You will come across both of them in code that you see, so you should be aware.</p>
<ul>
<li>You can change your RStudio app options to use <code>|&gt;</code> instead of <code>%&gt;%</code> if you like:
<ul>
<li>Tools -&gt; Global Options -&gt; Code -&gt; select Use native pipe operator</li>
</ul></li>
</ul>
</section></section>
<section>
<section id="row-wrangling" class="title-slide slide level1 center" data-number="6">
<h1><span class="header-section-number">6</span> Row wrangling</h1>
<ul>
<li><code>arrange()</code></li>
<li><code>filter()</code></li>
<li><code>&amp;</code>, <code>|</code>, <code>!</code></li>
</ul>
</section>
<section id="sorting-data-frames-using-arrange" class="slide level2" data-number="6.1">
<h2><span class="header-section-number">6.1</span> Sorting data frames using <code>arrange()</code></h2>
<ul>
<li><p><code>arrange()</code> is a function that lets us sort a dataset by a specified variable</p></li>
<li><p>By default, it sorts in <em>ascending</em> order:</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a>smoke_complete <span class="sc">%&gt;%</span> </span>
<span id="cb14-2"><a href="#cb14-2"></a>  <span class="fu">arrange</span>(cigarettes_per_day)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,152 × 6
   age_at_diagnosis tumor_stage  cigarettes_per_day gender vital_status disease
              &lt;dbl&gt; &lt;chr&gt;                     &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;        &lt;chr&gt;  
 1            18051 stage iii               0.00822 male   dead         BLCA   
 2            19847 not reported            0.0110  female alive        CESC   
 3            14225 not reported            0.0219  female dead         CESC   
 4            31258 not reported            0.0312  female alive        CESC   
 5            27449 stage ii                0.0548  female dead         LUSC   
 6            27449 stage ii                0.0548  female dead         LUSC   
 7            16429 stage iii               0.0548  female dead         LUSC   
 8            16429 stage iii               0.0548  female dead         LUSC   
 9            15965 not reported            0.0548  female alive        CESC   
10            17465 not reported            0.0548  female dead         CESC   
# ℹ 1,142 more rows</code></pre>
</div>
</div>
<ul>
<li>To sort by descending order, you need to wrap the variable in the <code>desc()</code> function:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a>smoke_complete <span class="sc">%&gt;%</span></span>
<span id="cb16-2"><a href="#cb16-2"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(cigarettes_per_day))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,152 × 6
   age_at_diagnosis tumor_stage cigarettes_per_day gender vital_status disease
              &lt;dbl&gt; &lt;chr&gt;                    &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;        &lt;chr&gt;  
 1            17635 stage iv                 40    male   dead         BLCA   
 2            27708 stage ia                 13.2  male   dead         LUSC   
 3            27708 stage ia                 13.2  male   dead         LUSC   
 4            24477 stage ia                 11.0  male   dead         LUSC   
 5            24477 stage ia                 11.0  male   dead         LUSC   
 6            24713 stage iiia               10.5  male   dead         LUSC   
 7            24713 stage iiia               10.5  male   dead         LUSC   
 8            25646 stage ib                  9.86 male   alive        LUSC   
 9            25646 stage ib                  9.86 male   alive        LUSC   
10            25506 stage ib                  8.88 male   alive        LUSC   
# ℹ 1,142 more rows</code></pre>
</div>
</div>
<ul>
<li>You can also arrange by multiple variables.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a>smoke_complete <span class="sc">%&gt;%</span></span>
<span id="cb18-2"><a href="#cb18-2"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(cigarettes_per_day),</span>
<span id="cb18-3"><a href="#cb18-3"></a>          tumor_stage)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,152 × 6
   age_at_diagnosis tumor_stage cigarettes_per_day gender vital_status disease
              &lt;dbl&gt; &lt;chr&gt;                    &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;        &lt;chr&gt;  
 1            17635 stage iv                 40    male   dead         BLCA   
 2            27708 stage ia                 13.2  male   dead         LUSC   
 3            27708 stage ia                 13.2  male   dead         LUSC   
 4            24477 stage ia                 11.0  male   dead         LUSC   
 5            24477 stage ia                 11.0  male   dead         LUSC   
 6            24713 stage iiia               10.5  male   dead         LUSC   
 7            24713 stage iiia               10.5  male   dead         LUSC   
 8            25646 stage ib                  9.86 male   alive        LUSC   
 9            25646 stage ib                  9.86 male   alive        LUSC   
10            25506 stage ib                  8.88 male   alive        LUSC   
# ℹ 1,142 more rows</code></pre>
</div>
</div>
<ul>
<li>Note that order of variables in <code>arrange()</code> matters!</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a>smoke_complete <span class="sc">%&gt;%</span></span>
<span id="cb20-2"><a href="#cb20-2"></a>  <span class="fu">arrange</span>(</span>
<span id="cb20-3"><a href="#cb20-3"></a>    tumor_stage,</span>
<span id="cb20-4"><a href="#cb20-4"></a>    <span class="fu">desc</span>(cigarettes_per_day)</span>
<span id="cb20-5"><a href="#cb20-5"></a>          )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,152 × 6
   age_at_diagnosis tumor_stage  cigarettes_per_day gender vital_status disease
              &lt;dbl&gt; &lt;chr&gt;                     &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;        &lt;chr&gt;  
 1            25220 not reported               3.12 female alive        CESC   
 2            28873 not reported               3.07 female dead         CESC   
 3            18773 not reported               2.90 female alive        CESC   
 4            16231 not reported               2.85 female dead         CESC   
 5            24059 not reported               2.74 female dead         CESC   
 6            20302 not reported               2.74 female alive        CESC   
 7            28826 not reported               2.47 male   dead         LUSC   
 8            28826 not reported               2.47 male   dead         LUSC   
 9            21520 not reported               2.19 female dead         CESC   
10            20207 not reported               2.19 female alive        CESC   
# ℹ 1,142 more rows</code></pre>
</div>
</div>
</section>
<section id="mini-challenge-2" class="slide level2" data-number="6.2">
<h2><span class="header-section-number">6.2</span> (Mini) Challenge 2</h2>
<p>Use <code>arrange()</code> to sort by <code>disease</code> and descending by <code>tumor_stage</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a><span class="co"># edit the code below</span></span>
<span id="cb22-2"><a href="#cb22-2"></a>smoke_complete <span class="sc">%&gt;%</span></span>
<span id="cb22-3"><a href="#cb22-3"></a>  <span class="fu">arrange</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,152 × 6
   age_at_diagnosis tumor_stage  cigarettes_per_day gender vital_status disease
              &lt;dbl&gt; &lt;chr&gt;                     &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;        &lt;chr&gt;  
 1            18051 stage iii               0.00822 male   dead         BLCA   
 2            19847 not reported            0.0110  female alive        CESC   
 3            14225 not reported            0.0219  female dead         CESC   
 4            31258 not reported            0.0312  female alive        CESC   
 5            27449 stage ii                0.0548  female dead         LUSC   
 6            27449 stage ii                0.0548  female dead         LUSC   
 7            16429 stage iii               0.0548  female dead         LUSC   
 8            16429 stage iii               0.0548  female dead         LUSC   
 9            15965 not reported            0.0548  female alive        CESC   
10            17465 not reported            0.0548  female dead         CESC   
# ℹ 1,142 more rows</code></pre>
</div>
</div>
</section>
<section id="filtering-our-data" class="slide level2" data-number="6.3">
<h2><span class="header-section-number">6.3</span> <code>filter()</code>ing our data</h2>
<ul>
<li><code>filter()</code> lets us subset our data according to specific criteria.</li>
<li>Let’s filter on the <code>numeric</code> variable <code>cigarettes_per_day</code>:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a>smoke_complete <span class="sc">%&gt;%</span></span>
<span id="cb24-2"><a href="#cb24-2"></a>  <span class="fu">filter</span>(cigarettes_per_day <span class="sc">&lt;</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,151 × 6
   age_at_diagnosis tumor_stage  cigarettes_per_day gender vital_status disease
              &lt;dbl&gt; &lt;chr&gt;                     &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;        &lt;chr&gt;  
 1            18051 stage iii               0.00822 male   dead         BLCA   
 2            19847 not reported            0.0110  female alive        CESC   
 3            14225 not reported            0.0219  female dead         CESC   
 4            31258 not reported            0.0312  female alive        CESC   
 5            27449 stage ii                0.0548  female dead         LUSC   
 6            27449 stage ii                0.0548  female dead         LUSC   
 7            16429 stage iii               0.0548  female dead         LUSC   
 8            16429 stage iii               0.0548  female dead         LUSC   
 9            15965 not reported            0.0548  female alive        CESC   
10            17465 not reported            0.0548  female dead         CESC   
# ℹ 1,141 more rows</code></pre>
</div>
</div>
<ul>
<li>We can also filter categorical variables.
<ul>
<li>This requires us to know the values (levels) of the categorical variable. <em>More on this in a bit…</em></li>
</ul></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1"></a>smoke_complete <span class="sc">%&gt;%</span></span>
<span id="cb26-2"><a href="#cb26-2"></a>  <span class="fu">filter</span>(tumor_stage <span class="sc">==</span> <span class="st">"stage iv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 91 × 6
   age_at_diagnosis tumor_stage cigarettes_per_day gender vital_status disease
              &lt;dbl&gt; &lt;chr&gt;                    &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;        &lt;chr&gt;  
 1            21491 stage iv                 0.164 male   dead         BLCA   
 2            28082 stage iv                 0.219 male   alive        BLCA   
 3            24267 stage iv                 0.219 male   dead         BLCA   
 4            28470 stage iv                 0.274 male   alive        BLCA   
 5            23538 stage iv                 0.384 female alive        BLCA   
 6            22122 stage iv                 0.438 female alive        BLCA   
 7            30205 stage iv                 0.534 male   dead         BLCA   
 8            26893 stage iv                 0.548 male   dead         BLCA   
 9            27496 stage iv                 0.548 female dead         BLCA   
10            27397 stage iv                 0.548 female dead         BLCA   
# ℹ 81 more rows</code></pre>
</div>
</div>
<ul>
<li>We can also combine different filtering conditions:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1"></a>smoke_complete <span class="sc">%&gt;%</span></span>
<span id="cb28-2"><a href="#cb28-2"></a>  <span class="fu">filter</span>(tumor_stage <span class="sc">==</span> <span class="st">"stage iv"</span>, <span class="co"># note the comma</span></span>
<span id="cb28-3"><a href="#cb28-3"></a>         cigarettes_per_day <span class="sc">&lt;</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 90 × 6
   age_at_diagnosis tumor_stage cigarettes_per_day gender vital_status disease
              &lt;dbl&gt; &lt;chr&gt;                    &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;        &lt;chr&gt;  
 1            21491 stage iv                 0.164 male   dead         BLCA   
 2            28082 stage iv                 0.219 male   alive        BLCA   
 3            24267 stage iv                 0.219 male   dead         BLCA   
 4            28470 stage iv                 0.274 male   alive        BLCA   
 5            23538 stage iv                 0.384 female alive        BLCA   
 6            22122 stage iv                 0.438 female alive        BLCA   
 7            30205 stage iv                 0.534 male   dead         BLCA   
 8            26893 stage iv                 0.548 male   dead         BLCA   
 9            27496 stage iv                 0.548 female dead         BLCA   
10            27397 stage iv                 0.548 female dead         BLCA   
# ℹ 80 more rows</code></pre>
</div>
</div>
<ul>
<li><strong>Using a comma requires BOTH conditions to be true.</strong>
<ul>
<li>In other words, in logic this is equivalent to using “and”. More on this next.</li>
</ul></li>
</ul>
</section>
<section id="filtering-requires-a-little-logic" class="slide level2" data-number="6.4">
<h2><span class="header-section-number">6.4</span> Filtering requires a little logic</h2>
<ul>
<li>We can chain multiple criteria using differnt operators:
<ul>
<li><code>,</code> (AND)</li>
<li><code>&amp;</code> (AND)</li>
<li><code>|</code> (OR)</li>
</ul></li>
<li>But we need to review a little logic before we do this.</li>
</ul>
<div class="panel-tabset">
<ul id="tabset-1" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-1-1">AND: <code>&amp;</code>, <code>,</code></a></li><li><a href="#tabset-1-2">OR: <code>|</code></a></li><li><a href="#tabset-1-3">Which option is “bigger”?</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1">
<ul>
<li>If we want to restrict to patients who were
<ul>
<li><code>male</code> <strong>and</strong> <code>stage iv</code>,</li>
<li>we would use an <code>&amp;</code> to chain these criteria together:</li>
</ul></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1"></a>smoke_complete <span class="sc">%&gt;%</span></span>
<span id="cb30-2"><a href="#cb30-2"></a>  <span class="fu">filter</span>(gender <span class="sc">==</span> <span class="st">"male"</span> <span class="sc">&amp;</span> </span>
<span id="cb30-3"><a href="#cb30-3"></a>           tumor_stage <span class="sc">==</span> <span class="st">"stage iv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 75 × 6
   age_at_diagnosis tumor_stage cigarettes_per_day gender vital_status disease
              &lt;dbl&gt; &lt;chr&gt;                    &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;        &lt;chr&gt;  
 1            21491 stage iv                 0.164 male   dead         BLCA   
 2            28082 stage iv                 0.219 male   alive        BLCA   
 3            24267 stage iv                 0.219 male   dead         BLCA   
 4            28470 stage iv                 0.274 male   alive        BLCA   
 5            30205 stage iv                 0.534 male   dead         BLCA   
 6            26893 stage iv                 0.548 male   dead         BLCA   
 7            30674 stage iv                 0.658 male   dead         BLCA   
 8            27049 stage iv                 0.767 male   alive        BLCA   
 9            21233 stage iv                 0.822 male   alive        BLCA   
10            20420 stage iv                 0.822 male   alive        BLCA   
# ℹ 65 more rows</code></pre>
</div>
</div>
<ul>
<li>Note that we could also use the comma in this case, as above:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1"></a>smoke_complete <span class="sc">%&gt;%</span></span>
<span id="cb32-2"><a href="#cb32-2"></a>  <span class="fu">filter</span>(gender <span class="sc">==</span> <span class="st">"male"</span>,</span>
<span id="cb32-3"><a href="#cb32-3"></a>         tumor_stage <span class="sc">==</span> <span class="st">"stage iv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 75 × 6
   age_at_diagnosis tumor_stage cigarettes_per_day gender vital_status disease
              &lt;dbl&gt; &lt;chr&gt;                    &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;        &lt;chr&gt;  
 1            21491 stage iv                 0.164 male   dead         BLCA   
 2            28082 stage iv                 0.219 male   alive        BLCA   
 3            24267 stage iv                 0.219 male   dead         BLCA   
 4            28470 stage iv                 0.274 male   alive        BLCA   
 5            30205 stage iv                 0.534 male   dead         BLCA   
 6            26893 stage iv                 0.548 male   dead         BLCA   
 7            30674 stage iv                 0.658 male   dead         BLCA   
 8            27049 stage iv                 0.767 male   alive        BLCA   
 9            21233 stage iv                 0.822 male   alive        BLCA   
10            20420 stage iv                 0.822 male   alive        BLCA   
# ℹ 65 more rows</code></pre>
</div>
</div>
</div>
<div id="tabset-1-2">
<ul>
<li>If we want to restrict to patients who were
<ul>
<li><code>male</code> <strong>or</strong> <code>stage iv</code>,</li>
<li>we would use an <code>|</code> to chain these criteria together.</li>
</ul></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1"></a>smoke_complete <span class="sc">%&gt;%</span></span>
<span id="cb34-2"><a href="#cb34-2"></a>  <span class="fu">filter</span>(gender <span class="sc">==</span> <span class="st">"male"</span> <span class="sc">|</span></span>
<span id="cb34-3"><a href="#cb34-3"></a>           tumor_stage <span class="sc">==</span> <span class="st">"stage iv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 802 × 6
   age_at_diagnosis tumor_stage cigarettes_per_day gender vital_status disease
              &lt;dbl&gt; &lt;chr&gt;                    &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;        &lt;chr&gt;  
 1            18051 stage iii              0.00822 male   dead         BLCA   
 2            29288 stage iii              0.0548  male   dead         BLCA   
 3            18983 stage ii               0.0822  male   dead         BLCA   
 4            22632 stage iiia             0.110   male   dead         LUSC   
 5            22632 stage iiia             0.110   male   dead         LUSC   
 6            20632 stage iib              0.110   male   alive        LUSC   
 7            20632 stage iib              0.110   male   alive        LUSC   
 8            25579 stage iii              0.110   male   dead         BLCA   
 9            23156 stage i                0.137   male   dead         LUSC   
10            23156 stage i                0.137   male   dead         LUSC   
# ℹ 792 more rows</code></pre>
</div>
</div>
</div>
<div id="tabset-1-3">
<p>Think about it: which of the above two code blocks will return a larger number of patients?</p>
</div>
</div>
</div>
</section>
<section id="not-equal" class="slide level2" data-number="6.5">
<h2><span class="header-section-number">6.5</span> <code>!=</code> NOT EQUAL</h2>
<ul>
<li>We can also negate operators.</li>
<li><code>!=</code> means NOT EQUAL</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1"></a>smoke_complete <span class="sc">%&gt;%</span></span>
<span id="cb36-2"><a href="#cb36-2"></a>  <span class="fu">filter</span>(gender <span class="sc">!=</span> <span class="st">"male"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 366 × 6
   age_at_diagnosis tumor_stage  cigarettes_per_day gender vital_status disease
              &lt;dbl&gt; &lt;chr&gt;                     &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;        &lt;chr&gt;  
 1            19847 not reported             0.0110 female alive        CESC   
 2            14225 not reported             0.0219 female dead         CESC   
 3            31258 not reported             0.0312 female alive        CESC   
 4            27449 stage ii                 0.0548 female dead         LUSC   
 5            27449 stage ii                 0.0548 female dead         LUSC   
 6            16429 stage iii                0.0548 female dead         LUSC   
 7            16429 stage iii                0.0548 female dead         LUSC   
 8            15965 not reported             0.0548 female alive        CESC   
 9            17465 not reported             0.0548 female dead         CESC   
10            15849 not reported             0.0548 female alive        CESC   
# ℹ 356 more rows</code></pre>
</div>
</div>
<ul>
<li>Or, we can negate a whole statement:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1"></a>smoke_complete <span class="sc">%&gt;%</span></span>
<span id="cb38-2"><a href="#cb38-2"></a>  <span class="fu">filter</span>(<span class="sc">!</span>(gender <span class="sc">==</span> <span class="st">"male"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 366 × 6
   age_at_diagnosis tumor_stage  cigarettes_per_day gender vital_status disease
              &lt;dbl&gt; &lt;chr&gt;                     &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;        &lt;chr&gt;  
 1            19847 not reported             0.0110 female alive        CESC   
 2            14225 not reported             0.0219 female dead         CESC   
 3            31258 not reported             0.0312 female alive        CESC   
 4            27449 stage ii                 0.0548 female dead         LUSC   
 5            27449 stage ii                 0.0548 female dead         LUSC   
 6            16429 stage iii                0.0548 female dead         LUSC   
 7            16429 stage iii                0.0548 female dead         LUSC   
 8            15965 not reported             0.0548 female alive        CESC   
 9            17465 not reported             0.0548 female dead         CESC   
10            15849 not reported             0.0548 female alive        CESC   
# ℹ 356 more rows</code></pre>
</div>
</div>
<ul>
<li>We can get a little complex.
<ul>
<li>What does the code below do?</li>
<li>What do you think <code>%in%</code> does?</li>
</ul></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1"></a>smoke_complete <span class="sc">%&gt;%</span></span>
<span id="cb40-2"><a href="#cb40-2"></a>  <span class="fu">filter</span>(tumor_stage<span class="sc">!=</span><span class="st">"not reported"</span>,</span>
<span id="cb40-3"><a href="#cb40-3"></a>         disease <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"CESC"</span>, <span class="st">"LUSC"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 830 × 6
   age_at_diagnosis tumor_stage cigarettes_per_day gender vital_status disease
              &lt;dbl&gt; &lt;chr&gt;                    &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;        &lt;chr&gt;  
 1            27449 stage ii                0.0548 female dead         LUSC   
 2            27449 stage ii                0.0548 female dead         LUSC   
 3            16429 stage iii               0.0548 female dead         LUSC   
 4            16429 stage iii               0.0548 female dead         LUSC   
 5            22632 stage iiia              0.110  male   dead         LUSC   
 6            22632 stage iiia              0.110  male   dead         LUSC   
 7            20632 stage iib               0.110  male   alive        LUSC   
 8            20632 stage iib               0.110  male   alive        LUSC   
 9            23156 stage i                 0.137  male   dead         LUSC   
10            23156 stage i                 0.137  male   dead         LUSC   
# ℹ 820 more rows</code></pre>
</div>
</div>
</section>
<section id="more-filter-examples" class="slide level2" data-number="6.6">
<h2><span class="header-section-number">6.6</span> More filter examples</h2>
<p>See <a href="https://jminnier-berd-r-courses.netlify.app/02-data-wrangling-tidyverse/02_data_wrangling_slides_part1.html#27" target="_blank">this BERD workshop slide</a></p>
</section>
<section id="how-to-check-what-values-exist-in-a-categorical-variable" class="slide level2" data-number="6.7">
<h2><span class="header-section-number">6.7</span> How to check what values exist in a categorical variable</h2>
<ul>
<li>We’ve already seen both <code>skim()</code> and <code>glimpse()</code> can give us an idea of what values exist in a categorical variable.</li>
<li>We can use <code>distinct()</code> to grab all of the unique values for a categorical variable,
<ul>
<li>and then use <code>arrange()</code> to sort them.</li>
</ul></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1"></a>smoke_complete <span class="sc">%&gt;%</span></span>
<span id="cb42-2"><a href="#cb42-2"></a>  <span class="fu">distinct</span>(tumor_stage) <span class="sc">%&gt;%</span></span>
<span id="cb42-3"><a href="#cb42-3"></a>  <span class="fu">arrange</span>(tumor_stage)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 11 × 1
   tumor_stage 
   &lt;chr&gt;       
 1 not reported
 2 stage i     
 3 stage ia    
 4 stage ib    
 5 stage ii    
 6 stage iia   
 7 stage iib   
 8 stage iii   
 9 stage iiia  
10 stage iiib  
11 stage iv    </code></pre>
</div>
</div>
<ul>
<li><p>This can also alert us if there are categorical coding mistakes (such as misspellings) in our data.</p></li>
<li><p>Another tidy way to do this is to use the <code>tabyl()</code> function from the <code>janitor</code> package:</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1"></a><span class="co"># library(janitor) # already loaded above, but just a heads up this function tabyl is from the janitor package</span></span>
<span id="cb44-2"><a href="#cb44-2"></a></span>
<span id="cb44-3"><a href="#cb44-3"></a>smoke_complete <span class="sc">%&gt;%</span></span>
<span id="cb44-4"><a href="#cb44-4"></a>  <span class="fu">tabyl</span>(tumor_stage)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  tumor_stage   n     percent
 not reported  99 0.085937500
      stage i   7 0.006076389
     stage ia 146 0.126736111
     stage ib 266 0.230902778
     stage ii  65 0.056423611
    stage iia 112 0.097222222
    stage iib 148 0.128472222
    stage iii  86 0.074652778
   stage iiia 102 0.088541667
   stage iiib  30 0.026041667
     stage iv  91 0.078993056</code></pre>
</div>
</div>
<ul>
<li>We’ll learn about more <code>tabyl()</code> options later in the term.</li>
</ul>
</section>
<section id="mini-challenge-3" class="slide level2" data-number="6.8">
<h2><span class="header-section-number">6.8</span> (Mini) Challenge 3</h2>
<ul>
<li>Use <code>filter()</code> to restrict to patients from <code>smoke_complete</code> who have
<ul>
<li>disease == “LUSC” and</li>
<li>who smoke less than 1 <code>cigarettes_per_day</code>.</li>
</ul></li>
<li>How many rows are left?</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1"></a><span class="co"># edit this code</span></span>
<span id="cb46-2"><a href="#cb46-2"></a>smoke_complete <span class="sc">%&gt;%</span></span>
<span id="cb46-3"><a href="#cb46-3"></a>  <span class="fu">filter</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,152 × 6
   age_at_diagnosis tumor_stage  cigarettes_per_day gender vital_status disease
              &lt;dbl&gt; &lt;chr&gt;                     &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;        &lt;chr&gt;  
 1            18051 stage iii               0.00822 male   dead         BLCA   
 2            19847 not reported            0.0110  female alive        CESC   
 3            14225 not reported            0.0219  female dead         CESC   
 4            31258 not reported            0.0312  female alive        CESC   
 5            27449 stage ii                0.0548  female dead         LUSC   
 6            27449 stage ii                0.0548  female dead         LUSC   
 7            16429 stage iii               0.0548  female dead         LUSC   
 8            16429 stage iii               0.0548  female dead         LUSC   
 9            15965 not reported            0.0548  female alive        CESC   
10            17465 not reported            0.0548  female dead         CESC   
# ℹ 1,142 more rows</code></pre>
</div>
</div>
</section>
<section id="more-about-comparison-and-logical-operators" class="slide level2" data-number="6.9">
<h2><span class="header-section-number">6.9</span> More about comparison and logical operators</h2>
<ul>
<li><p>This is a useful reference for all the different operators (both logical and comparison) that you can use: <a href="https://www.datamentor.io/r-programming/operator/" target="_blank">https://www.datamentor.io/r-programming/operator/</a></p></li>
<li><p>From R4DS (class textbook) section 12.3 on <a href="https://r4ds.hadley.nz/logicals.html#boolean-algebra" target="_blank">Boolean algebra</a>:</p></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="image/R4DS_logical_operators_transform.png" style="width:100.0%"></p>
</figure>
</div>
</section></section>
<section>
<section id="column-wrangling" class="title-slide slide level1 center" data-number="7">
<h1><span class="header-section-number">7</span> Column wrangling</h1>
<ul>
<li><code>select()</code></li>
<li><code>tidyselect</code> helpers</li>
</ul>
</section>
<section id="selecting-columns-using-select" class="slide level2" data-number="7.1">
<h2><span class="header-section-number">7.1</span> Selecting columns using <code>select()</code></h2>
<ul>
<li><code>select()</code> allows us to select variables from our dataset</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1"></a>smoke_complete <span class="sc">%&gt;%</span></span>
<span id="cb48-2"><a href="#cb48-2"></a>  <span class="fu">select</span>(gender, tumor_stage) <span class="sc">%&gt;%</span> </span>
<span id="cb48-3"><a href="#cb48-3"></a>  <span class="fu">names</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "gender"      "tumor_stage"</code></pre>
</div>
</div>
<ul>
<li>We can also select multiple consecutive columns with <code>:</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1"></a>smoke_complete <span class="sc">%&gt;%</span></span>
<span id="cb50-2"><a href="#cb50-2"></a>  <span class="fu">select</span>(gender<span class="sc">:</span>disease) <span class="sc">%&gt;%</span> </span>
<span id="cb50-3"><a href="#cb50-3"></a>  <span class="fu">names</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "gender"       "vital_status" "disease"     </code></pre>
</div>
</div>
<ul>
<li>To select everything <em>except</em> some variables,
<ul>
<li>use a <code>-</code> or <code>!</code> in front of the variables.</li>
</ul></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1"></a>smoke_complete <span class="sc">%&gt;%</span></span>
<span id="cb52-2"><a href="#cb52-2"></a>  <span class="fu">select</span>(<span class="sc">-</span>gender) <span class="sc">%&gt;%</span> </span>
<span id="cb52-3"><a href="#cb52-3"></a>  <span class="fu">names</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "age_at_diagnosis"   "tumor_stage"        "cigarettes_per_day"
[4] "vital_status"       "disease"           </code></pre>
</div>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1"></a>smoke_complete <span class="sc">%&gt;%</span></span>
<span id="cb54-2"><a href="#cb54-2"></a>  <span class="fu">select</span>(<span class="sc">-</span>gender, <span class="sc">-</span>disease) <span class="sc">%&gt;%</span> </span>
<span id="cb54-3"><a href="#cb54-3"></a>  <span class="fu">names</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "age_at_diagnosis"   "tumor_stage"        "cigarettes_per_day"
[4] "vital_status"      </code></pre>
</div>
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1"></a><span class="co"># with !</span></span>
<span id="cb56-2"><a href="#cb56-2"></a>smoke_complete <span class="sc">%&gt;%</span></span>
<span id="cb56-3"><a href="#cb56-3"></a>  <span class="fu">select</span>(<span class="sc">!</span>gender) <span class="sc">%&gt;%</span> </span>
<span id="cb56-4"><a href="#cb56-4"></a>  <span class="fu">names</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "age_at_diagnosis"   "tumor_stage"        "cigarettes_per_day"
[4] "vital_status"       "disease"           </code></pre>
</div>
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1"></a>smoke_complete <span class="sc">%&gt;%</span></span>
<span id="cb58-2"><a href="#cb58-2"></a>  <span class="fu">select</span>(<span class="sc">!</span><span class="fu">c</span>(gender, disease)) <span class="sc">%&gt;%</span> <span class="co"># note the c()</span></span>
<span id="cb58-3"><a href="#cb58-3"></a>  <span class="fu">names</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "age_at_diagnosis"   "tumor_stage"        "cigarettes_per_day"
[4] "vital_status"      </code></pre>
</div>
</div>
</section>
<section id="tidyselect-helpers" class="slide level2" data-number="7.2">
<h2><span class="header-section-number">7.2</span> <code>tidyselect</code> helpers</h2>
<ul>
<li>There are ways to select column names by “searching” them.</li>
<li>These are called the <code>tidyselect</code> helpers. You can see examples <a href="https://tidyselect.r-lib.org/reference/language.html" target="_blank">here</a>.</li>
</ul>
<div class="panel-tabset">
<ul id="tabset-2" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-2-1"><code>contains()</code></a></li><li><a href="#tabset-2-2"><code>starts_with()</code>, <code>ends_with()</code></a></li><li><a href="#tabset-2-3"><code>last_col()</code></a></li><li><a href="#tabset-2-4">column numbers</a></li><li><a href="#tabset-2-5"><code>any_of()</code>, <code>all_of()</code></a></li></ul>
<div class="tab-content">
<div id="tabset-2-1">
<ul>
<li>For instance, it might be useful (though not really in our case, although it would be with the <code>brca_clinical</code> data from last week), to select all columns where the column name includes the word “day”:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1"></a>smoke_complete <span class="sc">%&gt;%</span> </span>
<span id="cb60-2"><a href="#cb60-2"></a>  <span class="fu">select</span>(<span class="fu">contains</span>(<span class="st">"day"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,152 × 1
   cigarettes_per_day
                &lt;dbl&gt;
 1            0.00822
 2            0.0110 
 3            0.0219 
 4            0.0312 
 5            0.0548 
 6            0.0548 
 7            0.0548 
 8            0.0548 
 9            0.0548 
10            0.0548 
# ℹ 1,142 more rows</code></pre>
</div>
</div>
</div>
<div id="tabset-2-2">
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1"></a>smoke_complete <span class="sc">%&gt;%</span> </span>
<span id="cb62-2"><a href="#cb62-2"></a>  <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">"v"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,152 × 1
   vital_status
   &lt;chr&gt;       
 1 dead        
 2 alive       
 3 dead        
 4 alive       
 5 dead        
 6 dead        
 7 dead        
 8 dead        
 9 alive       
10 dead        
# ℹ 1,142 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1"></a>smoke_complete <span class="sc">%&gt;%</span> </span>
<span id="cb64-2"><a href="#cb64-2"></a>  <span class="fu">select</span>(<span class="fu">ends_with</span>(<span class="st">"s"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,152 × 2
   age_at_diagnosis vital_status
              &lt;dbl&gt; &lt;chr&gt;       
 1            18051 dead        
 2            19847 alive       
 3            14225 dead        
 4            31258 alive       
 5            27449 dead        
 6            27449 dead        
 7            16429 dead        
 8            16429 dead        
 9            15965 alive       
10            17465 dead        
# ℹ 1,142 more rows</code></pre>
</div>
</div>
</div>
<div id="tabset-2-3">
<p>Just the last column:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1"></a>smoke_complete <span class="sc">%&gt;%</span> </span>
<span id="cb66-2"><a href="#cb66-2"></a>  <span class="fu">select</span>(<span class="fu">last_col</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,152 × 1
   disease
   &lt;chr&gt;  
 1 BLCA   
 2 CESC   
 3 CESC   
 4 CESC   
 5 LUSC   
 6 LUSC   
 7 LUSC   
 8 LUSC   
 9 CESC   
10 CESC   
# ℹ 1,142 more rows</code></pre>
</div>
</div>
</div>
<div id="tabset-2-4">
<p>This is one useful shortcut (though use with caution, you need to know your column names and order):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1"></a>smoke_complete <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,152 × 4
   age_at_diagnosis tumor_stage  cigarettes_per_day vital_status
              &lt;dbl&gt; &lt;chr&gt;                     &lt;dbl&gt; &lt;chr&gt;       
 1            18051 stage iii               0.00822 dead        
 2            19847 not reported            0.0110  alive       
 3            14225 not reported            0.0219  dead        
 4            31258 not reported            0.0312  alive       
 5            27449 stage ii                0.0548  dead        
 6            27449 stage ii                0.0548  dead        
 7            16429 stage iii               0.0548  dead        
 8            16429 stage iii               0.0548  dead        
 9            15965 not reported            0.0548  alive       
10            17465 not reported            0.0548  dead        
# ℹ 1,142 more rows</code></pre>
</div>
</div>
</div>
<div id="tabset-2-5">
<ul>
<li>You might also have a character vector of column names that you want to pull out.</li>
<li>Let’s say you have one saved:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1"></a>mynames <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"disease"</span>, <span class="st">"tumor_stage"</span>, <span class="st">"vital_status"</span>)</span>
<span id="cb70-2"><a href="#cb70-2"></a></span>
<span id="cb70-3"><a href="#cb70-3"></a>smoke_complete <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">any_of</span>(mynames))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,152 × 3
   disease tumor_stage  vital_status
   &lt;chr&gt;   &lt;chr&gt;        &lt;chr&gt;       
 1 BLCA    stage iii    dead        
 2 CESC    not reported alive       
 3 CESC    not reported dead        
 4 CESC    not reported alive       
 5 LUSC    stage ii     dead        
 6 LUSC    stage ii     dead        
 7 LUSC    stage iii    dead        
 8 LUSC    stage iii    dead        
 9 CESC    not reported alive       
10 CESC    not reported dead        
# ℹ 1,142 more rows</code></pre>
</div>
</div>
<ul>
<li>There is a similar function <code>all_of</code> which fails if the column name is missing:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1"></a>smoke_complete <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">all_of</span>(mynames))</span>
<span id="cb72-2"><a href="#cb72-2"></a></span>
<span id="cb72-3"><a href="#cb72-3"></a>mynames2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"id"</span>, mynames)</span>
<span id="cb72-4"><a href="#cb72-4"></a>smoke_complete <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">any_of</span>(mynames2))</span>
<span id="cb72-5"><a href="#cb72-5"></a>smoke_complete <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">all_of</span>(mynames2))  <span class="co"># error</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="rearranging-the-order-of-columns" class="slide level2" data-number="7.3">
<h2><span class="header-section-number">7.3</span> Rearranging the order of columns</h2>
<h3 data-number="7.3.1" id="with-select-and-everything"><span class="header-section-number">7.3.1</span> With <code>select()</code> and <code>everything()</code></h3>
<ul>
<li><code>everything()</code> is useful for some quick rearranging of columns</li>
<li>Below we move <code>tumor_stage</code> and <code>disease</code> to the beginning of the dataset:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1"></a>smoke_complete <span class="sc">%&gt;%</span> <span class="fu">names</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "age_at_diagnosis"   "tumor_stage"        "cigarettes_per_day"
[4] "gender"             "vital_status"       "disease"           </code></pre>
</div>
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1"></a>smoke_complete <span class="sc">%&gt;%</span> </span>
<span id="cb75-2"><a href="#cb75-2"></a>  <span class="fu">select</span>(tumor_stage, disease, <span class="fu">everything</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb75-3"><a href="#cb75-3"></a>  <span class="fu">names</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "tumor_stage"        "disease"            "age_at_diagnosis"  
[4] "cigarettes_per_day" "gender"             "vital_status"      </code></pre>
</div>
</div>
<h3 data-number="7.3.2" id="with-relocate"><span class="header-section-number">7.3.2</span> With <code>relocate()</code></h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1"></a>smoke_complete <span class="sc">%&gt;%</span> </span>
<span id="cb77-2"><a href="#cb77-2"></a>  <span class="fu">relocate</span>(tumor_stage, disease, <span class="fu">everything</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb77-3"><a href="#cb77-3"></a>  <span class="fu">names</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "tumor_stage"        "disease"            "age_at_diagnosis"  
[4] "cigarettes_per_day" "gender"             "vital_status"      </code></pre>
</div>
</div>
<h3 data-number="7.3.3" id="after-and-.before"><span class="header-section-number">7.3.3</span> <code>.after</code> and <code>.before</code></h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1"></a>smoke_complete <span class="sc">%&gt;%</span> </span>
<span id="cb79-2"><a href="#cb79-2"></a>  <span class="fu">relocate</span>(tumor_stage, <span class="at">.before =</span> age_at_diagnosis) <span class="sc">%&gt;%</span> </span>
<span id="cb79-3"><a href="#cb79-3"></a>  <span class="fu">names</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "tumor_stage"        "age_at_diagnosis"   "cigarettes_per_day"
[4] "gender"             "vital_status"       "disease"           </code></pre>
</div>
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1"></a>smoke_complete <span class="sc">%&gt;%</span> </span>
<span id="cb81-2"><a href="#cb81-2"></a>  <span class="fu">relocate</span>(disease, <span class="at">.after =</span> vital_status) <span class="sc">%&gt;%</span> </span>
<span id="cb81-3"><a href="#cb81-3"></a>  <span class="fu">names</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "age_at_diagnosis"   "tumor_stage"        "cigarettes_per_day"
[4] "gender"             "vital_status"       "disease"           </code></pre>
</div>
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1"></a>smoke_complete <span class="sc">%&gt;%</span> </span>
<span id="cb83-2"><a href="#cb83-2"></a>  <span class="fu">relocate</span>(disease, <span class="at">.after =</span> <span class="fu">last_col</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb83-3"><a href="#cb83-3"></a>  <span class="fu">names</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "age_at_diagnosis"   "tumor_stage"        "cigarettes_per_day"
[4] "gender"             "vital_status"       "disease"           </code></pre>
</div>
</div>
</section>
<section id="more-tidyselect-examples" class="slide level2" data-number="7.4">
<h2><span class="header-section-number">7.4</span> More tidyselect examples</h2>
<p>See some more examples in <a href="https://jminnier-berd-r-courses.netlify.app/02-data-wrangling-tidyverse/02_data_wrangling_slides_part1.html#32" target="_blank">this slide</a></p>
<p>For more info and learning about tidyselect, run this code in your console: (just the first 2 sections on tidyselect)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1"></a><span class="co"># install remotes package</span></span>
<span id="cb85-2"><a href="#cb85-2"></a><span class="fu">install.packages</span>(<span class="st">"remotes"</span>)</span>
<span id="cb85-3"><a href="#cb85-3"></a><span class="co"># use remotes to install this package from github</span></span>
<span id="cb85-4"><a href="#cb85-4"></a>remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">"laderast/tidyowl"</span>)</span>
<span id="cb85-5"><a href="#cb85-5"></a></span>
<span id="cb85-6"><a href="#cb85-6"></a><span class="co"># load tidyowl package</span></span>
<span id="cb85-7"><a href="#cb85-7"></a><span class="fu">library</span>(tidyowl)</span>
<span id="cb85-8"><a href="#cb85-8"></a></span>
<span id="cb85-9"><a href="#cb85-9"></a><span class="co"># interactive tutorial</span></span>
<span id="cb85-10"><a href="#cb85-10"></a>tidyowl<span class="sc">::</span><span class="fu">learn_tidyselect</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="the-difference-between-filter-and-select" class="slide level2" data-number="7.5">
<h2><span class="header-section-number">7.5</span> The difference between <code>filter()</code> and <code>select()</code></h2>
<ul>
<li>One thing to keep in mind is that:
<ul>
<li><code>filter()</code> works on rows (think FILTER in Excel!), and</li>
<li><code>select()</code> works on columns (select your relevant variables)</li>
</ul></li>
</ul>
<p>Keep that in mind!</p>
</section>
<section id="saving-our-results" class="slide level2" data-number="7.6">
<h2><span class="header-section-number">7.6</span> Saving our results</h2>
<ul>
<li>Let’s save our processed data into the <code>data/</code> folder.</li>
<li>We’ll save it as a <code>csv</code> file, which is short for <em>comma separated value</em>.
<ul>
<li>This is a file type that can be easily imported into Excel.</li>
</ul></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1"></a>processed_data <span class="ot">&lt;-</span> smoke_complete <span class="sc">%&gt;%</span></span>
<span id="cb86-2"><a href="#cb86-2"></a>  <span class="fu">select</span>(<span class="sc">-</span>gender) <span class="sc">%&gt;%</span></span>
<span id="cb86-3"><a href="#cb86-3"></a>  <span class="fu">filter</span>(cigarettes_per_day <span class="sc">&lt;</span> <span class="dv">20</span>)</span>
<span id="cb86-4"><a href="#cb86-4"></a></span>
<span id="cb86-5"><a href="#cb86-5"></a><span class="fu">write_excel_csv</span>(</span>
<span id="cb86-6"><a href="#cb86-6"></a>  <span class="at">x =</span> processed_data,</span>
<span id="cb86-7"><a href="#cb86-7"></a>  <span class="at">file =</span> <span class="fu">here</span>(<span class="st">"part3"</span>, <span class="st">"data"</span>,<span class="st">"processed_data.csv"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>If you want to save it as an Excel file, you can use a function in the <code>writexl</code> package:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1"></a>writexl<span class="sc">::</span><span class="fu">write_xlsx</span>(</span>
<span id="cb87-2"><a href="#cb87-2"></a>  <span class="at">x =</span> processed_data,</span>
<span id="cb87-3"><a href="#cb87-3"></a>  <span class="at">path =</span> <span class="fu">here</span>(<span class="st">"part3"</span>, <span class="st">"data"</span>,<span class="st">"processed_data.xlsx"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="challenge-4-10-minutes" class="slide level2" data-number="7.7">
<h2><span class="header-section-number">7.7</span> Challenge 4 (10+ minutes)</h2>
<p>Go back to your <code>smoke_messy.qmd</code> file.</p>
<p>Using the messy <code>smoke_messy</code> data, write code to do these data cleaning steps:</p>
<ol type="1">
<li>Use <code>clean_names()</code> from the janitor package to clean up the column names. Read the help documentation if you’ve never seen this.</li>
<li>Use <code>remove_empty()</code> from the janitor package to remove empty columns and rows.</li>
<li>Use <code>fill()</code> to fill in tumor stage values. (Read the example code in <code>?fill</code> to see how to use it, you do need to specify arguments here).</li>
<li>Remove the “Notes” column.</li>
<li>Save the resulting data frame as a <code>.csv</code> file using <code>write_excel_csv()</code> in the <code>data/</code> folder. Remember to use <code>here()</code>.</li>
</ol>
</section>
<section id="further-reading-about-dplyr" class="slide level2" data-number="7.8">
<h2><span class="header-section-number">7.8</span> Further Reading about <code>dplyr</code></h2>
<p>Please refer to <a href="https://niederhausen.github.io/BSTA_526_W26/weeks/week_03.html#readings" target="_blank">this week’s readings</a> for more reading about <code>dplyr</code>.</p>
</section></section>
<section>
<section id="customizing-ggplots" class="title-slide slide level1 center" data-number="8">
<h1><span class="header-section-number">8</span> Customizing <code>ggplot</code>s</h1>

</section>
<section id="customizing-a-scatterplot" class="slide level2" data-number="8.1">
<h2><span class="header-section-number">8.1</span> Customizing a Scatterplot</h2>
<p>Now that we have the data formatted nicely, we can start creating and customizing a figure.</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1"></a>our_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(</span>
<span id="cb88-2"><a href="#cb88-2"></a>  smoke_complete,</span>
<span id="cb88-3"><a href="#cb88-3"></a>  <span class="fu">aes</span>(<span class="at">x =</span> age_at_diagnosis, </span>
<span id="cb88-4"><a href="#cb88-4"></a>      <span class="at">y =</span> cigarettes_per_day, </span>
<span id="cb88-5"><a href="#cb88-5"></a>      <span class="at">color =</span> disease)) <span class="sc">+</span></span>
<span id="cb88-6"><a href="#cb88-6"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb88-7"><a href="#cb88-7"></a>  <span class="fu">labs</span>(</span>
<span id="cb88-8"><a href="#cb88-8"></a>    <span class="at">title =</span> <span class="st">"Cigarettes per Day versus Age at Diagnosis"</span>,</span>
<span id="cb88-9"><a href="#cb88-9"></a>    <span class="at">x =</span> <span class="st">"Age at Diagnosis"</span>,</span>
<span id="cb88-10"><a href="#cb88-10"></a>    <span class="at">y =</span> <span class="st">"Cigarettes Smoked per Day"</span></span>
<span id="cb88-11"><a href="#cb88-11"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1"></a>our_plot</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img data-src="part_03_b526_slides_files/figure-revealjs/unnamed-chunk-43-1.png" width="672"></p>
</div>
</div>
</div>
</div>
</section>
<section id="changing-visual-properties-using-built-in-themes" class="slide level2" data-number="8.2">
<h2><span class="header-section-number">8.2</span> Changing visual properties using built in themes</h2>
<ul>
<li>Adding (layering) a theme will change the settings of many visual aspects of the plot.</li>
<li>There are many different themes.</li>
<li>A nice simple one is <code>theme_minimal()</code> which comes with the <code>ggplot2</code> package:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1"></a>our_plot <span class="sc">+</span>   <span class="co"># our_plot created above</span></span>
<span id="cb90-2"><a href="#cb90-2"></a>  <span class="fu">theme_minimal</span>()  <span class="co"># layer a theme onto our_plot</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img data-src="part_03_b526_slides_files/figure-revealjs/unnamed-chunk-44-1.png" width="672"></p>
</div>
</div>
</section>
<section id="more-themes" class="slide level2" data-number="8.3">
<h2><span class="header-section-number">8.3</span> More themes</h2>
<ul>
<li>A complete list of themes included with <code>ggplot2</code> is available <a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" target="_blank">here</a>, and
<ul>
<li>we’ll cover ways to customize our own themes later in this lesson.</li>
</ul></li>
<li>Other packages have additional themes, such ass <code>ggthemes</code>:</li>
</ul>
<div class="panel-tabset">
<ul id="tabset-3" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-3-1"><code>theme_clean()</code></a></li><li><a href="#tabset-3-2"><code>theme_economist()</code></a></li><li><a href="#tabset-3-3"><code>theme_excel_new()</code></a></li></ul>
<div class="tab-content">
<div id="tabset-3-1">
<div class="cell">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1"></a>our_plot <span class="sc">+</span> ggthemes<span class="sc">::</span><span class="fu">theme_clean</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img data-src="part_03_b526_slides_files/figure-revealjs/unnamed-chunk-45-1.png" width="672"></p>
</div>
</div>
</div>
<div id="tabset-3-2">
<div class="cell">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1"></a>our_plot <span class="sc">+</span> ggthemes<span class="sc">::</span><span class="fu">theme_economist</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img data-src="part_03_b526_slides_files/figure-revealjs/unnamed-chunk-46-1.png" width="672"></p>
</div>
</div>
</div>
<div id="tabset-3-3">
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1"></a>our_plot <span class="sc">+</span> ggthemes<span class="sc">::</span><span class="fu">theme_excel_new</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img data-src="part_03_b526_slides_files/figure-revealjs/unnamed-chunk-47-1.png" width="672"></p>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="using-theme-to-customize" class="slide level2" data-number="8.4">
<h2><span class="header-section-number">8.4</span> Using <code>theme()</code> to customize</h2>
<ul>
<li>Adding the <code>theme()</code> function lets us customize our plot further.</li>
<li>Most of these settings are set within one of the built in themes,
<ul>
<li>so if you want to overwrite what is in the theme,</li>
<li>you’ll need to set these settings <em>after</em> setting the theme, by adding them in order.</li>
</ul></li>
</ul>
<p>There are a few arguments that are really helpful to modify:</p>
<ul>
<li><code>axis.title</code></li>
<li><code>axis.title.x</code> (label for the x-axis)</li>
<li><code>axis.title.y</code> (label for the y-axis)</li>
<li><code>legend.position</code> (Placing the legend, including removing it)</li>
</ul>
<p>and many more. You can read <a href="https://ggplot2-book.org/themes.html" target="_blank">this (in progress) chapter</a> in the ggplot2 book about themes to see more examples.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1"></a>our_plot <span class="sc">+</span> </span>
<span id="cb94-2"><a href="#cb94-2"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb94-3"><a href="#cb94-3"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img data-src="part_03_b526_slides_files/figure-revealjs/unnamed-chunk-48-1.png" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1"></a>our_plot <span class="sc">+</span> </span>
<span id="cb95-2"><a href="#cb95-2"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span> </span>
<span id="cb95-3"><a href="#cb95-3"></a>  <span class="fu">theme</span>(</span>
<span id="cb95-4"><a href="#cb95-4"></a>    <span class="co"># change legend position</span></span>
<span id="cb95-5"><a href="#cb95-5"></a>    <span class="at">legend.position =</span> <span class="st">"bottom"</span></span>
<span id="cb95-6"><a href="#cb95-6"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img data-src="part_03_b526_slides_files/figure-revealjs/unnamed-chunk-49-1.png" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1"></a>our_plot <span class="sc">+</span> </span>
<span id="cb96-2"><a href="#cb96-2"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb96-3"><a href="#cb96-3"></a>  <span class="fu">theme</span>(</span>
<span id="cb96-4"><a href="#cb96-4"></a>    <span class="co"># remove legends</span></span>
<span id="cb96-5"><a href="#cb96-5"></a>    <span class="at">legend.position =</span> <span class="st">"none"</span>,</span>
<span id="cb96-6"><a href="#cb96-6"></a>    <span class="co"># also change font of various elements</span></span>
<span id="cb96-7"><a href="#cb96-7"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">size =</span> <span class="dv">12</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img data-src="part_03_b526_slides_files/figure-revealjs/unnamed-chunk-50-1.png" width="672"></p>
</div>
</div>
</section>
<section id="saving-your-work" class="slide level2" data-number="8.5">
<h2><span class="header-section-number">8.5</span> Saving your work</h2>
<ul>
<li>After you’re satisfied with a plot, it’s likely you’d want to share it with other people or include in a manuscript or report.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1"></a><span class="co"># save plot to file</span></span>
<span id="cb97-2"><a href="#cb97-2"></a><span class="fu">ggsave</span>(<span class="st">"awesomePlot.jpg"</span>, <span class="at">width =</span> <span class="dv">10</span>, <span class="at">height =</span> <span class="dv">10</span>, <span class="at">dpi =</span> <span class="dv">300</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><p>This automatically saves the last plot for which code was run in your root directory.</p></li>
<li><p>This command interprets the file format for export using the file suffix you specify.</p></li>
<li><p>The other arguments dictate the size (<code>width</code> and <code>height</code>) and resolution (<code>dpi</code>).</p></li>
<li><p>You can specify a different directory!</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1"></a><span class="fu">ggsave</span>(<span class="fu">here</span>(<span class="st">"part3"</span>, <span class="st">"image"</span>,<span class="st">"awesomePlot.jpg"</span>), <span class="at">width =</span> <span class="dv">10</span>, <span class="at">height =</span> <span class="dv">10</span>, <span class="at">dpi =</span> <span class="dv">300</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="boxplots" class="slide level2" data-number="8.6">
<h2><span class="header-section-number">8.6</span> Boxplots</h2>
<ul>
<li>Boxplots compare the distribution of a quantitative variable among categories.</li>
<li>Remember, <code>vital_status</code> is a <code>character</code> vector, but we’re not too worried about the implicit order of the categories, so we can use it as is in our boxplot.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1"></a><span class="co"># creating a boxplot</span></span>
<span id="cb99-2"><a href="#cb99-2"></a></span>
<span id="cb99-3"><a href="#cb99-3"></a><span class="fu">ggplot</span>(smoke_complete,</span>
<span id="cb99-4"><a href="#cb99-4"></a>       <span class="fu">aes</span>(<span class="at">x =</span> vital_status, </span>
<span id="cb99-5"><a href="#cb99-5"></a>           <span class="at">y =</span> cigarettes_per_day)) <span class="sc">+</span></span>
<span id="cb99-6"><a href="#cb99-6"></a>  <span class="fu">geom_boxplot</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img data-src="part_03_b526_slides_files/figure-revealjs/box-1.png" width="672"></p>
</div>
</div>
<ul>
<li>The main differences from the scatterplots we created earlier are the <code>geom</code> type and the variables plotted.</li>
</ul>
</section>
<section id="change-colors" class="slide level2" data-number="8.7">
<h2><span class="header-section-number">8.7</span> Change colors</h2>
<ul>
<li>We can change the color of boxplots similarly to scatterplots.</li>
<li>However, we map to <code>fill</code> and not <code>color</code>:</li>
</ul>
<p><em>Challenge</em>: change <code>fill</code> to <code>color</code> and/or add a map to <code>color.</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1"></a><span class="co"># add color</span></span>
<span id="cb100-2"><a href="#cb100-2"></a><span class="fu">ggplot</span>(smoke_complete,</span>
<span id="cb100-3"><a href="#cb100-3"></a>       <span class="fu">aes</span>(<span class="at">x =</span> vital_status, </span>
<span id="cb100-4"><a href="#cb100-4"></a>           <span class="at">y =</span> cigarettes_per_day, </span>
<span id="cb100-5"><a href="#cb100-5"></a>           <span class="at">fill =</span> vital_status)) <span class="sc">+</span></span>
<span id="cb100-6"><a href="#cb100-6"></a>  <span class="fu">geom_boxplot</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img data-src="part_03_b526_slides_files/figure-revealjs/box_color-1.png" width="672"></p>
</div>
</div>
</section>
<section id="fill-or-color-scales" class="slide level2" data-number="8.8">
<h2><span class="header-section-number">8.8</span> <code>fill</code> or <code>color</code> scales</h2>
<ul>
<li>Similar to themes, there are built in color palettes you can use to change the colors in your plot.</li>
<li>You can also do this manually.</li>
</ul>
<div class="panel-tabset">
<ul id="tabset-4" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-4-1">Default</a></li><li><a href="#tabset-4-2"><code>scale_fill_colorblind()</code></a></li><li><a href="#tabset-4-3">viridis</a></li><li><a href="#tabset-4-4">manual changes</a></li></ul>
<div class="tab-content">
<div id="tabset-4-1">
<p>Here is the default fill scale:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1"></a><span class="co"># add color</span></span>
<span id="cb101-2"><a href="#cb101-2"></a><span class="fu">ggplot</span>(smoke_complete,</span>
<span id="cb101-3"><a href="#cb101-3"></a>       <span class="fu">aes</span>(<span class="at">x =</span> tumor_stage, </span>
<span id="cb101-4"><a href="#cb101-4"></a>           <span class="at">y =</span> cigarettes_per_day, </span>
<span id="cb101-5"><a href="#cb101-5"></a>           <span class="at">fill =</span> tumor_stage)) <span class="sc">+</span></span>
<span id="cb101-6"><a href="#cb101-6"></a>  <span class="fu">geom_boxplot</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img data-src="part_03_b526_slides_files/figure-revealjs/box_scale_fill-1.png" width="672"></p>
</div>
</div>
</div>
<div id="tabset-4-2">
<ul>
<li>The functions that change the fill start with <code>scale_</code> such as this colorblind friendly scale in the ggthemes package.</li>
<li>However, it runs out of colors! So be careful with these.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1"></a><span class="co"># adding color</span></span>
<span id="cb102-2"><a href="#cb102-2"></a><span class="fu">ggplot</span>(smoke_complete,</span>
<span id="cb102-3"><a href="#cb102-3"></a>       <span class="fu">aes</span>(<span class="at">x =</span> tumor_stage, </span>
<span id="cb102-4"><a href="#cb102-4"></a>           <span class="at">y =</span> cigarettes_per_day, </span>
<span id="cb102-5"><a href="#cb102-5"></a>           <span class="at">fill =</span> tumor_stage)) <span class="sc">+</span></span>
<span id="cb102-6"><a href="#cb102-6"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb102-7"><a href="#cb102-7"></a>  <span class="fu">scale_fill_colorblind</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img data-src="part_03_b526_slides_files/figure-revealjs/box_scale_fill_colorblind-1.png" width="672"></p>
</div>
</div>
</div>
<div id="tabset-4-3">
<ul>
<li>A useful also colorblind friendly palate is the viridis palette built into ggplot2.</li>
<li>Read more about it, and the other palettes built in <a href="https://cran.r-project.org/web/packages/viridis/vignettes/intro-to-viridis.html" target="_blank">in the viridis package vignette</a>.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1"></a><span class="co"># adding color</span></span>
<span id="cb103-2"><a href="#cb103-2"></a><span class="fu">ggplot</span>(smoke_complete,</span>
<span id="cb103-3"><a href="#cb103-3"></a>       <span class="fu">aes</span>(<span class="at">x =</span> tumor_stage, </span>
<span id="cb103-4"><a href="#cb103-4"></a>           <span class="at">y =</span> cigarettes_per_day, </span>
<span id="cb103-5"><a href="#cb103-5"></a>           <span class="at">fill =</span> tumor_stage)) <span class="sc">+</span></span>
<span id="cb103-6"><a href="#cb103-6"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb103-7"><a href="#cb103-7"></a>  <span class="fu">scale_fill_viridis_d</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img data-src="part_03_b526_slides_files/figure-revealjs/box_scale_fill_viridis-1.png" width="672"></p>
</div>
</div>
<ul>
<li>There are several you can use here:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1"></a><span class="co"># adding color</span></span>
<span id="cb104-2"><a href="#cb104-2"></a><span class="fu">ggplot</span>(smoke_complete,</span>
<span id="cb104-3"><a href="#cb104-3"></a>       <span class="fu">aes</span>(<span class="at">x =</span> tumor_stage, </span>
<span id="cb104-4"><a href="#cb104-4"></a>           <span class="at">y =</span> cigarettes_per_day, </span>
<span id="cb104-5"><a href="#cb104-5"></a>           <span class="at">fill =</span> tumor_stage)) <span class="sc">+</span></span>
<span id="cb104-6"><a href="#cb104-6"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb104-7"><a href="#cb104-7"></a>  <span class="fu">scale_fill_viridis_d</span>(<span class="at">option =</span> <span class="st">"A"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img data-src="part_03_b526_slides_files/figure-revealjs/box_scale_fill_viridis2-1.png" width="672"></p>
</div>
</div>
</div>
<div id="tabset-4-4">
<ul>
<li>We can also change fills/colors manually, such as:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1"></a><span class="co"># adding color</span></span>
<span id="cb105-2"><a href="#cb105-2"></a><span class="fu">ggplot</span>(smoke_complete,</span>
<span id="cb105-3"><a href="#cb105-3"></a>       <span class="fu">aes</span>(<span class="at">x =</span> tumor_stage, </span>
<span id="cb105-4"><a href="#cb105-4"></a>           <span class="at">y =</span> cigarettes_per_day, </span>
<span id="cb105-5"><a href="#cb105-5"></a>           <span class="at">fill =</span> gender)) <span class="sc">+</span></span>
<span id="cb105-6"><a href="#cb105-6"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb105-7"><a href="#cb105-7"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"purple"</span>,<span class="st">"lightgreen"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img data-src="part_03_b526_slides_files/figure-revealjs/box_scale_fill_manual-1.png" width="672"></p>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="faceting-our-boxplot" class="slide level2" data-number="8.9">
<h2><span class="header-section-number">8.9</span> Faceting our boxplot</h2>
<ul>
<li>One of the most powerful ways to change a visualization is by <em>faceting</em>.</li>
<li>We can make multiple plots using another categorical variable.</li>
<li>To do this, we have to add the <code>facet_wrap()</code> command to our plot.
<ul>
<li>We need to specify the variable to <code>facet_wrap</code> by using the <code>vars()</code> function to specify it as a variable.</li>
</ul></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1"></a><span class="co"># adding color</span></span>
<span id="cb106-2"><a href="#cb106-2"></a><span class="fu">ggplot</span>(smoke_complete,</span>
<span id="cb106-3"><a href="#cb106-3"></a>       <span class="fu">aes</span>(<span class="at">x =</span> vital_status, </span>
<span id="cb106-4"><a href="#cb106-4"></a>           <span class="at">y =</span> cigarettes_per_day, </span>
<span id="cb106-5"><a href="#cb106-5"></a>           <span class="at">fill =</span> vital_status)) <span class="sc">+</span></span>
<span id="cb106-6"><a href="#cb106-6"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb106-7"><a href="#cb106-7"></a>  <span class="fu">ylim</span>(<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">20</span>)) <span class="sc">+</span> <span class="co"># just to see the boxes better</span></span>
<span id="cb106-8"><a href="#cb106-8"></a>  <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(disease))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img data-src="part_03_b526_slides_files/figure-revealjs/box_color_facet-1.png" width="672"></p>
</div>
</div>
<ul>
<li><p><em>Don’t try to facet on a <code>numeric</code> variable - it won’t work.</em></p></li>
<li><p>Don’t forget to look at the help documentation (e.g., <code>?facet_wrap</code>) to learn more about additional ways to customize your plots!</p></li>
</ul>
</section>
<section id="mini-challenge-5" class="slide level2" data-number="8.10">
<h2><span class="header-section-number">8.10</span> (Mini) Challenge 5</h2>
<ul>
<li>Facet the boxplot by <code>gender</code>. Don’t forget <code>vars()</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1"></a><span class="co"># update code</span></span>
<span id="cb107-2"><a href="#cb107-2"></a><span class="co"># change to eval: TRUE once completed</span></span>
<span id="cb107-3"><a href="#cb107-3"></a></span>
<span id="cb107-4"><a href="#cb107-4"></a><span class="fu">ggplot</span>(smoke_complete,</span>
<span id="cb107-5"><a href="#cb107-5"></a>       <span class="fu">aes</span>(<span class="at">x =</span> vital_status, </span>
<span id="cb107-6"><a href="#cb107-6"></a>           <span class="at">y =</span> cigarettes_per_day, </span>
<span id="cb107-7"><a href="#cb107-7"></a>           <span class="at">fill =</span> vital_status)) <span class="sc">+</span></span>
<span id="cb107-8"><a href="#cb107-8"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb107-9"><a href="#cb107-9"></a>  <span class="fu">ylim</span>(<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">20</span>)) <span class="sc">+</span></span>
<span id="cb107-10"><a href="#cb107-10"></a>  <span class="fu">facet_wrap</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="facet_grid" class="slide level2" data-number="8.11">
<h2><span class="header-section-number">8.11</span> <code>facet_grid()</code></h2>
<ul>
<li>Another way to facet our plots is with <code>facet_grid()</code>,
<ul>
<li>which lets us select both rows and columns based on categorical variables:</li>
</ul></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1"></a><span class="fu">ggplot</span>(smoke_complete,</span>
<span id="cb108-2"><a href="#cb108-2"></a>       <span class="fu">aes</span>(<span class="at">x =</span> vital_status, </span>
<span id="cb108-3"><a href="#cb108-3"></a>           <span class="at">y =</span> cigarettes_per_day, </span>
<span id="cb108-4"><a href="#cb108-4"></a>           <span class="at">fill =</span> vital_status)) <span class="sc">+</span></span>
<span id="cb108-5"><a href="#cb108-5"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb108-6"><a href="#cb108-6"></a>  <span class="fu">ylim</span>(<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">10</span>)) <span class="sc">+</span></span>
<span id="cb108-7"><a href="#cb108-7"></a>  <span class="fu">facet_grid</span>(<span class="at">rows =</span> <span class="fu">vars</span>(disease), </span>
<span id="cb108-8"><a href="#cb108-8"></a>             <span class="at">cols =</span> <span class="fu">vars</span>(gender))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img data-src="part_03_b526_slides_files/figure-revealjs/unnamed-chunk-62-1.png" width="672"></p>
</div>
</div>
</section>
<section id="challenge-6-10-minutes" class="slide level2" data-number="8.12">
<h2><span class="header-section-number">8.12</span> Challenge 6 (10 minutes)</h2>
<ol type="1">
<li>Create a boxplot of age at diagnosis (in years) stratified by tumor status. Make the y-axis tumor stage.</li>
<li>Map fill to tumor stage.</li>
<li>Use the minimal theme.</li>
<li>Use facet grid to facet on disease (rows) and vital status (cols).</li>
<li>Set arguments in <code>facet_grid</code> to have scales and space set to “free_y”.</li>
<li>Change axis labels to look nicer, and change fill scale to another scale.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1"></a><span class="co"># update code</span></span>
<span id="cb109-2"><a href="#cb109-2"></a><span class="co"># change to eval: true once completed</span></span>
<span id="cb109-3"><a href="#cb109-3"></a></span>
<span id="cb109-4"><a href="#cb109-4"></a><span class="fu">ggplot</span>(smoke_complete,</span>
<span id="cb109-5"><a href="#cb109-5"></a>       <span class="fu">aes</span>()) <span class="sc">+</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="further-ggplot-learning" class="slide level2" data-number="8.13">
<h2><span class="header-section-number">8.13</span> Further ggplot learning</h2>
<p>If you are interested in learning more about ggplot:</p>
<ul>
<li>Documentation for all <code>ggplot</code> features is available <a href="https://ggplot2.tidyverse.org" target="_blank">here</a>.</li>
<li>RStudio also publishes a <a href="https://github.com/rstudio/cheatsheets/blob/main/data-visualization-2.1.pdf" target="_blank">ggplot cheat sheet</a> that is really handy!
<ul>
<li>Note: this is for version 3 of ggplot</li>
</ul></li>
<li><a href="http://zevross.com/blog/2014/08/04/beautiful-plotting-in-r-a-ggplot2-cheatsheet-3/" target="_blank">Customizing ggplot2 Cheatsheet</a> is also handy, because it organizes ggplot2 commands by task.
<ul>
<li>Note: this is for version 2 of ggplot</li>
</ul></li>
<li><a href="https://tidyverse.org/blog/2025/09/ggplot2-4-0-0/">New <code>ggplot</code> options</a> with the latest version 4 released in September 2025</li>
</ul>
</section></section>
<section id="what-you-learned-today" class="title-slide slide level1 center" data-number="9">
<h1><span class="header-section-number">9</span> What you learned today</h1>
<ul>
<li>Pipes (<code>%&gt;%</code>)</li>
<li><code>arrange()</code></li>
<li><code>filter()</code></li>
<li><code>select()</code></li>
<li>Customizing <code>ggplots</code> using <code>theme()</code></li>
<li>Making boxplots</li>
<li>Intro to using scales in <code>ggplot2</code> (more to come)</li>
<li>Faceting plots</li>
</ul>
</section>

<section id="post-class-survey" class="title-slide slide level1 center" data-number="10">
<h1><span class="header-section-number">10</span> Post Class Survey</h1>
<p>Please fill out the <a href="https://ohsu.ca1.qualtrics.com/jfe/form/SV_2f0SKdTYUo80aRo">post-class survey</a>.</p>
<p>Your responses are anonymous in that I separate your names from the survey answers before compiling/reading.</p>
<p>You may want to review previous years’ feedback <a href="https://niederhausen.github.io/BSTA_526_W26/survey_feedback_previous_years">here</a>.</p>
</section>

<section id="acknowledgements" class="title-slide slide level1 center" data-number="11">
<h1><span class="header-section-number">11</span> Acknowledgements</h1>
<ul>
<li>Part 3 is based on the BSTA 504 Winter 2023 course, taught by Jessica Minnier.
<ul>
<li>I made modifications to update the material from RMarkdown to Quarto, and streamlined/edited content for slides.</li>
<li>Added: relocate, ! for not selecting columns, ggplot v. 4 resource</li>
</ul></li>
<li>Minnier’s Acknowledgements:
<ul>
<li>This notebook was adapted from material from Kate Hertweck and <a href="https://fredhutch.io" class="uri">https://fredhutch.io</a> and from the R-Bootcamp by Ted Laderas and Jessica Minnier, as well as the “Data Wrangling in R with the Tidyverse” and “Data Visualization with R and ggplot2” <a href="https://github.com/jminnier/berd_r_courses">OCTRI-BERD workshops</a> by Jessica &amp; Meike Niederhausen.</li>
</ul></li>
</ul>

<div class="footer footer-default">

</div>
</section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1100,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        text: function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
              // target, if specified
              link.setAttribute("target", "_blank");
          }
        }
    });
    </script>
    

</body></html>